{% extends "base.html" %}

{% block content %}
<div class="form-container active">
    <h2 class="mb-4">{{ title }}</h2>
        <form method="POST">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.id_domaine.label(class="form-label") }}
                <select class="form-control" id="id_domaine" name="id_domaine">
                    {% set current_theme = None %}
                    {% for value, label in form.id_domaine.choices %}
                        {% set theme = label.split(' - ')[0] %}
                        {% set domaine = label.split(' - ')[1] %}
                        {% if theme != current_theme %}
                            {% if current_theme is not none %}
                                </optgroup>
                            {% endif %}
                            <optgroup label="{{ theme }}">
                            {% set current_theme = theme %}
                        {% endif %}
                        <option value="{{ value }}">{{ domaine }}</option>
                    {% endfor %}
                    </optgroup>
                </select>
            </div>
            <div class="form-group">
                {{ form.chapitre.label(class="form-label") }}
                {{ form.chapitre(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.submit(class="btn btn-primary") }}
            </div>
        </form>
    </div>
{% endblock %}
